---
import MainLayout from "@/layouts/MainLayout.astro";
import { SITE } from "@data/constants";
import {
    getAutoCategorizedPosts,
    getAutoCategorizedPostsByType,
    getMappedCurrentProjects,
    getMappedFutureProjects,
    getMappedPastProjects,
} from "../components/pages/projects/projectPosts";

// ObÈ›inem toate postÄƒrile categorizate automat
const allPosts = getAutoCategorizedPosts();
const pastPosts = getAutoCategorizedPostsByType("past");
const currentPosts = getAutoCategorizedPostsByType("current");
const futurePosts = getAutoCategorizedPostsByType("future");

// ObÈ›inem datele mapeate pentru fiecare tip
const mappedPastProjects = getMappedPastProjects();
const mappedCurrentProjects = getMappedCurrentProjects();
const mappedFutureProjects = getMappedFutureProjects();

const pageTitle = `Demo Categorizare AutomatÄƒ | ${SITE.title}`;
const metaDescription =
    "TesteazÄƒ funcÈ›ionalitatea de categorizare automatÄƒ a postÄƒrilor. Vezi cum se mutÄƒ automat postÄƒrile Ã®ntre pagini bazat pe data de creare.";
---

<MainLayout
    title={pageTitle}
    customDescription={metaDescription}
    customOgTitle={pageTitle}
>
    <div class="mx-auto max-w-[85rem] px-4 py-10 sm:px-6 lg:px-8 lg:py-14">
        <!-- Page Header -->
        <div class="mb-8 text-center">
            <h1
                class="text-4xl font-bold tracking-tight text-balance text-neutral-800 md:text-5xl md:leading-tight dark:text-neutral-200"
            >
                ðŸš€ Demo Categorizare AutomatÄƒ
            </h1>
            <p
                class="mx-auto mt-4 max-w-3xl text-lg text-neutral-600 dark:text-neutral-400"
            >
                TesteazÄƒ funcÈ›ionalitatea de mutare automatÄƒ a postÄƒrilor Ã®ntre
                pagini. PostÄƒrile se categorizeazÄƒ automat bazat pe data de
                creare.
            </p>
        </div>

        <!-- Statistics -->
        <div class="mb-12 grid grid-cols-1 gap-6 md:grid-cols-3">
            <div
                class="rounded-lg border border-blue-200 bg-blue-50 p-6 dark:border-blue-800 dark:bg-blue-900/20"
            >
                <div
                    class="text-2xl font-bold text-blue-600 dark:text-blue-400"
                >
                    {pastPosts.length}
                </div>
                <div class="text-sm text-blue-600 dark:text-blue-400">
                    Proiecte Trecute
                </div>
                <div class="mt-1 text-xs text-blue-500 dark:text-blue-500">
                    â‰¥ 90 zile
                </div>
            </div>
            <div
                class="rounded-lg border border-yellow-200 bg-yellow-50 p-6 dark:border-yellow-800 dark:bg-yellow-900/20"
            >
                <div
                    class="text-2xl font-bold text-yellow-600 dark:text-yellow-400"
                >
                    {currentPosts.length}
                </div>
                <div class="text-sm text-yellow-600 dark:text-yellow-400">
                    Proiecte Ã®n Curs
                </div>
                <div class="mt-1 text-xs text-yellow-500 dark:text-yellow-500">
                    30-89 zile
                </div>
            </div>
            <div
                class="rounded-lg border border-green-200 bg-green-50 p-6 dark:border-green-800 dark:bg-green-900/20"
            >
                <div
                    class="text-2xl font-bold text-green-600 dark:text-green-400"
                >
                    {futurePosts.length}
                </div>
                <div class="text-sm text-green-600 dark:text-green-400">
                    Proiecte Viitoare
                </div>
                <div class="mt-1 text-xs text-green-500 dark:text-green-500">
                    &lt; 30 zile
                </div>
            </div>
        </div>

        <!-- Rules -->
        <div class="mb-12 rounded-lg bg-gray-50 p-6 dark:bg-gray-800">
            <h2
                class="mb-4 text-xl font-semibold text-neutral-800 dark:text-neutral-200"
            >
                ðŸ“‹ Reguli de Categorizare AutomatÄƒ
            </h2>
            <div class="grid grid-cols-1 gap-4 text-sm md:grid-cols-3">
                <div class="flex items-center gap-2">
                    <span class="h-3 w-3 rounded-full bg-green-500"></span>
                    <span><strong>&lt; 30 zile:</strong> Proiecte Viitoare</span
                    >
                </div>
                <div class="flex items-center gap-2">
                    <span class="h-3 w-3 rounded-full bg-yellow-500"></span>
                    <span><strong>30-89 zile:</strong> Proiecte Ã®n Curs</span>
                </div>
                <div class="flex items-center gap-2">
                    <span class="h-3 w-3 rounded-full bg-blue-500"></span>
                    <span><strong>â‰¥ 90 zile:</strong> Proiecte Trecute</span>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="mb-12 flex justify-center">
            <div
                class="flex rounded-lg border border-gray-200 bg-white p-1 dark:border-gray-700 dark:bg-gray-800"
            >
                <a
                    href="/past-projects"
                    class="rounded-md px-6 py-3 text-sm font-medium text-gray-700 transition-colors hover:text-gray-900 dark:text-gray-300 dark:hover:text-white"
                >
                    Proiecte Trecute
                </a>
                <a
                    href="/current-projects"
                    class="rounded-md px-6 py-3 text-sm font-medium text-gray-700 transition-colors hover:text-gray-900 dark:text-gray-300 dark:hover:text-white"
                >
                    Proiecte Ã®n Curs
                </a>
                <a
                    href="/future-projects"
                    class="rounded-md px-6 py-3 text-sm font-medium text-gray-700 transition-colors hover:text-gray-900 dark:text-gray-300 dark:hover:text-white"
                >
                    Proiecte Viitoare
                </a>
            </div>
        </div>

        <!-- All Posts Table -->
        <div class="mb-12">
            <h2
                class="mb-6 text-2xl font-bold text-neutral-800 dark:text-neutral-200"
            >
                ðŸ“Š Toate PostÄƒrile (Categorizate Automat)
            </h2>
            <div class="overflow-x-auto">
                <table
                    class="min-w-full rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-800"
                >
                    <thead class="bg-gray-50 dark:bg-gray-700">
                        <tr>
                            <th
                                class="px-4 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase dark:text-gray-300"
                                >Titlu</th
                            >
                            <th
                                class="px-4 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase dark:text-gray-300"
                                >Data Creare</th
                            >
                            <th
                                class="px-4 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase dark:text-gray-300"
                                >Tip Automat</th
                            >
                            <th
                                class="px-4 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase dark:text-gray-300"
                                >Zile ÃŽn UrmÄƒ</th
                            >
                        </tr>
                    </thead>
                    <tbody
                        class="divide-y divide-gray-200 dark:divide-gray-700"
                    >
                        {
                            allPosts.map((post) => {
                                const postDate = new Date(post.createdAt);
                                const now = new Date();
                                const daysDifference = Math.floor(
                                    (now.getTime() - postDate.getTime()) /
                                        (1000 * 60 * 60 * 24),
                                );

                                return (
                                    <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                                        <td class="px-4 py-3 text-sm text-neutral-800 dark:text-neutral-200">
                                            {post.title}
                                        </td>
                                        <td class="px-4 py-3 text-sm text-neutral-600 dark:text-neutral-400">
                                            {postDate.toLocaleDateString(
                                                "ro-RO",
                                            )}
                                        </td>
                                        <td class="px-4 py-3">
                                            <span
                                                class={`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${
                                                    post.projectType === "past"
                                                        ? "bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"
                                                        : post.projectType ===
                                                            "current"
                                                          ? "bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"
                                                          : "bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"
                                                }`}
                                            >
                                                {post.projectType === "past"
                                                    ? "Trecut"
                                                    : post.projectType ===
                                                        "current"
                                                      ? "ÃŽn Curs"
                                                      : "Viitor"}
                                            </span>
                                        </td>
                                        <td class="px-4 py-3 text-sm text-neutral-600 dark:text-neutral-400">
                                            {daysDifference} zile
                                        </td>
                                    </tr>
                                );
                            })
                        }
                    </tbody>
                </table>
            </div>
        </div>

        <!-- How It Works -->
        <div
            class="mb-12 rounded-lg border border-blue-200 bg-blue-50 p-6 dark:border-blue-800 dark:bg-blue-900/20"
        >
            <h2
                class="mb-4 text-xl font-semibold text-neutral-800 dark:text-neutral-200"
            >
                ðŸ”§ Cum FuncÈ›ioneazÄƒ
            </h2>
            <div
                class="space-y-3 text-sm text-neutral-700 dark:text-neutral-300"
            >
                <p>
                    <strong>1.</strong> PostÄƒrile sunt create cu o datÄƒ specificÄƒ
                    Ã®n <code>createdAt</code>
                </p>
                <p>
                    <strong>2.</strong> FuncÈ›ia <code
                        >getProjectTypeByDate()</code
                    > calculeazÄƒ automat tipul bazat pe diferenÈ›a de zile
                </p>
                <p>
                    <strong>3.</strong> PostÄƒrile apar automat pe pagina corectÄƒ
                    fÄƒrÄƒ intervenÈ›ie manualÄƒ
                </p>
                <p>
                    <strong>4.</strong> CÃ¢nd trece timpul, postÄƒrile se mutÄƒ automat
                    Ã®ntre pagini
                </p>
            </div>
        </div>

        <!-- Testing Instructions -->
        <div
            class="mb-12 rounded-lg border border-green-200 bg-green-50 p-6 dark:border-green-800 dark:bg-green-900/20"
        >
            <h2
                class="mb-4 text-xl font-semibold text-neutral-800 dark:text-neutral-200"
            >
                ðŸ§ª Cum SÄƒ Testezi
            </h2>
            <div
                class="space-y-3 text-sm text-neutral-700 dark:text-neutral-300"
            >
                <p>
                    <strong>1.</strong> EditeazÄƒ <code
                        >src/data/projectPosts.ts</code
                    >
                </p>
                <p>
                    <strong>2.</strong> ModificÄƒ <code>createdAt</code> pentru o
                    postare existentÄƒ
                </p>
                <p><strong>3.</strong> SalveazÄƒ fiÈ™ierul È™i verificÄƒ pagina</p>
                <p>
                    <strong>4.</strong> Postarea va apÄƒrea automat pe pagina corectÄƒ!
                </p>
            </div>
        </div>

        <!-- Benefits -->
        <div class="mb-12">
            <h2
                class="mb-6 text-2xl font-bold text-neutral-800 dark:text-neutral-200"
            >
                âœ¨ Beneficii
            </h2>
            <div class="grid grid-cols-1 gap-6 md:grid-cols-2">
                <div
                    class="rounded-lg border border-gray-200 bg-white p-6 dark:border-gray-700 dark:bg-gray-800"
                >
                    <h3
                        class="mb-3 text-lg font-semibold text-neutral-800 dark:text-neutral-200"
                    >
                        ðŸ”„ Mutare AutomatÄƒ
                    </h3>
                    <p class="text-sm text-neutral-600 dark:text-neutral-400">
                        PostÄƒrile se mutÄƒ automat Ã®ntre pagini bazat pe timp,
                        fÄƒrÄƒ intervenÈ›ie manualÄƒ.
                    </p>
                </div>
                <div
                    class="rounded-lg border border-gray-200 bg-white p-6 dark:border-gray-700 dark:bg-gray-800"
                >
                    <h3
                        class="mb-3 text-lg font-semibold text-neutral-800 dark:text-neutral-200"
                    >
                        âš¡ UÈ™or de ÃŽntreÈ›inut
                    </h3>
                    <p class="text-sm text-neutral-600 dark:text-neutral-400">
                        Nu este nevoie sÄƒ actualizezi manual categoria fiecÄƒrei
                        postÄƒri.
                    </p>
                </div>
                <div
                    class="rounded-lg border border-gray-200 bg-white p-6 dark:border-gray-700 dark:bg-gray-800"
                >
                    <h3
                        class="mb-3 text-lg font-semibold text-neutral-800 dark:text-neutral-200"
                    >
                        ðŸŽ¯ Categorizare CorectÄƒ
                    </h3>
                    <p class="text-sm text-neutral-600 dark:text-neutral-400">
                        PostÄƒrile apar Ã®ntotdeauna pe pagina corectÄƒ bazat pe
                        data realÄƒ.
                    </p>
                </div>
                <div
                    class="rounded-lg border border-gray-200 bg-white p-6 dark:border-gray-700 dark:bg-gray-800"
                >
                    <h3
                        class="mb-3 text-lg font-semibold text-neutral-800 dark:text-neutral-200"
                    >
                        ðŸ“± Responsive
                    </h3>
                    <p class="text-sm text-neutral-600 dark:text-neutral-400">
                        FuncÈ›ioneazÄƒ perfect pe toate dispozitivele È™i paginile.
                    </p>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="text-center text-sm text-neutral-500 dark:text-neutral-400">
            <p>
                <strong>Tip:</strong> ModificÄƒ datele Ã®n <code
                    >projectPosts.ts</code
                > pentru a testa mutarea automatÄƒ!
            </p>
        </div>
    </div>
</MainLayout>
